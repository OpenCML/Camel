with <capture: Any, condition: Functor, update: Functor>
func test(target: Functor): Void {
    return ifexpr(condition<capture>(), () => {
        exec<() => {
            update<capture>();
            test<capture, condition, update>(target)
        }>(target);
    }, null)
};