## 可变性是例外，不可变是本质。

[命令式编程语言](https://zhida.zhihu.com/search?content_id=618505973&content_type=Answer&match_order=1&q=命令式编程语言&zhida_source=entity)（例如 C 和 Java）涉及在执行过程中发生变化的可变状态。命令指定如何通过破坏性地改变该状态来进行计算。过程（或方法）除了产生返回值之外还可能具有更新状态的副作用。

可变性的幻想在于它很容易推理：机器做这个，然后做这个，等等。

可变性的现实是，虽然机器擅长复杂的状态操纵，但人类却不擅长理解它。其本质是可变性破坏了引用透明度：用表达式的值替换表达式而不影响计算结果的能力。

人们很容易相信机器操纵的是单一状态，并且机器一次只做一件事。计算机系统竭尽全力试图提供这种幻觉。但这只是：一种幻觉。实际上，存在许多状态，分布在线程、内核、处理器和联网计算机上。机器可以同时做很多事情。可变性使得分布式状态和并发执行的推理变得非常困难。

然而，不变性使程序员摆脱了这些担忧。它提供了构建正确的并发程序的强大方法。与大多数函数式语言一样，OCaml 主要是一种不可变语言。它确实支持具有可变状态的命令式编程。

迭代和递归是计算机科学入门中的基本编程结构。ocaml函数式偏爱不变性的递归。

其他语言对对象所做的事情可以在 ML 中使用参数多态性、联合类型和函子等功能更好地实现。

对象的本质是多入口的闭包，即便在大型的项目中，许多对象也都可以消除。

> [(80 条消息) OCaml语言有什么先进的地方? - 知乎](https://www.zhihu.com/question/427379223/answer/3236340033)